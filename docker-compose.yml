version: "3.8"

services:
  uploads-api:
    container_name: uploads-api
    build: .
    environment:
      # Change to development to watch for changes.
      - ENVIRONMENT=production
    volumes:
      - /usr/app
      - /usr/app/node_modules
      - type: bind
        source: ./uploads
        target: /usr/uploads
      - type: bind
        source: ./auth.json
        target: /usr/app/auth.json
      - type: bind
        source: ./env.jsonc
        target: /usr/app/env.jsonc
    ports:
      - "4749:8000"
    restart: always
